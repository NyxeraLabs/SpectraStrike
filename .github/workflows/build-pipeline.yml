# Copyright (c) 2026 NyxeraLabs
# Author: Jose Maria Micoli
# Licensed under BSL 1.1
# Change Date: 2033-02-22 -> Apache-2.0
#
# You may:
# Study
# Modify
# Use for internal security testing
#
# You may NOT:
# Offer as a commercial service
# Sell derived competing products

name: build

on:
  push:
    branches:
      - '*'
  pull_request:
    branches:
      - '*'
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Validate compose manifests
        run: |
          docker compose -f docker-compose.dev.yml config >/dev/null
          docker compose -f docker-compose.prod.yml config >/dev/null

      - name: Build dev containers
        run: docker compose -f docker-compose.dev.yml build

      - name: Build prod containers
        run: docker compose -f docker-compose.prod.yml build
